#!/bin/bash
# take a url, open it as ex with chromium using tor

url=$1

[ "$url" =~ '(https?|ftp|file)://[-A-Za-z0-9\+&@#/%?=~_|!:,.;]*[-A-Za-z0-9\+&@#/%=~_|]' ] || exit 1

run_as_ex() {
	 if [ "$USER" == ex ];
		  "$@"
	 else
		  sudo -u ex "$@"
	 fi
}

run_as_ex FvwmCommand "Exec exec chromium '--incognito' '--user-data-dir=\$[HOME]/.config/chromium.tor'   '--proxy-server=localhost:8118'           '--host-resolver-rules=MAP * 0.0.0.0' '--load-extension=/usr/share/https-everywhere-chrome' '$url'"
